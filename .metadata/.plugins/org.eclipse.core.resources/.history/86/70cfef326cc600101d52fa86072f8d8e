package app.application.usecase;

import java.util.List;
import app.application.dto.TriangulationResponse;
import app.domain.model.Pilar;
import app.domain.repository.PilarRepository;
public class TriangulationCalculateUseCase {
	
	private final PilarRepository repository;
	
	public TriangulationCalculateUseCase(PilarRepository repository) {
		this.repository = repository;
	}
public TriangulationResponse execute() {
	List<Pilar> pilares = repository.findAll();
	
	if (pilares.isEmpty()) {
		throw new RuntimeException("No hay pilares registrados");
	}
	
		double promx = pilares.stream().mapToDouble(Pilar::getposx).average().orElse(0);
		double promy = pilares.stream().mapToDouble(Pilar::getposy).average().orElse(0);
		
		return new TriangulationResponse(
				promx,
				promy,
				0.78,
				"probabilidad alta de presencia demoniaca en als coordenadas");
}
}
